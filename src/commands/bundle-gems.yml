description: >
  Verifies dependencies are met by installed gems or installs gems

parameters:
  bundle-path:
    description: Path to store gems bundle
    type: string
    default: vendor/bundle

  cache-version:
    description: Version prefix to use in cache key
    type: string
    default: v1

steps:
  - run:
      name: Install gems
      command: |
        export BUNDLE_PATH=<< parameters.bundle-path >>
        export BUNDLE_JOBS=4
        export BUNDLE_RETRY=3
        bundle check || bundle install
